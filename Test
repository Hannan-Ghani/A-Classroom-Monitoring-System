{
  "rules": [
    {
      "source_column": "TRANSACTION_ID",
      "target_column": "transactionId",
      "transformation": "copy"
    },
    {
      "source_column": "TRANSACTION_ID",
      "target_column": "transactionUniqueId",
      "transformation": "concat",
      "additional_source_column": "EFF_START_DATE",
      "separator": "//"
    },
    {
      "source_column": "TRANSACTION_TYPE",
      "target_column": "transactionType",
      "transformation": "copy"
    },
    {
      "source_column": "ACCOUNT_ID",
      "target_column": "aAccountId",
      "transformation": "conditional",
      "condition": {
        "field": "DEBIT_CREDIT_INDICATOR",
        "value": "DEBIT",
        "else_value": "COUNTERPARTY_ID"
      }
    },
    {
      "source_column": "ACCOUNT_ID",
      "target_column": "bAccountId",
      "transformation": "conditional",
      "condition": {
        "field": "DEBIT_CREDIT_INDICATOR",
        "value": "CREDIT",
        "else_value": "ACCOUNT_ID"
      }
    },
    {
      "source_column": "ACCOUNT_KEY",
      "target_column": "aAccountKey",
      "transformation": "conditional",
      "condition": {
        "field": "DEBIT_CREDIT_INDICATOR",
        "value": "DEBIT",
        "else_value": "COUNTERPARTY_PRODUCT_KEY"
      }
    },
    {
      "source_column": "ACCOUNT_KEY",
      "target_column": "bAccountKey",
      "transformation": "conditional",
      "condition": {
        "field": "DEBIT_CREDIT_INDICATOR",
        "value": "CREDIT",
        "else_value": "ACCOUNT_KEY"
      }
    },
    {
      "source_column": "CUSTOMER_KEY",
      "target_column": "aCustomerId",
      "transformation": "conditional",
      "condition": {
        "field": "DEBIT_CREDIT_INDICATOR",
        "value": "DEBIT",
        "else_value": "COUNTERPARTY_CUSTOMER_KEY"
      }
    },
    {
      "source_column": "CUSTOMER_KEY",
      "target_column": "bCustomerId",
      "transformation": "conditional",
      "condition": {
        "field": "DEBIT_CREDIT_INDICATOR",
        "value": "CREDIT",
        "else_value": "CUSTOMER_KEY"
      }
    },
    {
      "source_column": "BRANCH_KEY",
      "target_column": "aBranchUniqueId",
      "transformation": "conditional",
      "condition": {
        "field": "DEBIT_CREDIT_INDICATOR",
        "value": "DEBIT",
        "else_value": ""
      }
    },
    {
      "source_column": "TRANSACTION_ROUTING_NUMBER",
      "target_column": "aSortCode",
      "transformation": "copy"
    },
    {
      "source_column": "TRANSACTION_ROUTING_NUMBER",
      "target_column": "bSortCode",
      "transformation": "copy"
    },
    {
      "source_column": "NARRATIVE",
      "target_column": "narrative",
      "transformation": "copy"
    },
    {
      "source_column": "SHORTNARRATIVE",
      "target_column": "narrativeShort",
      "transformation": "copy"
    },
    {
      "source_column": "TRANSACTION_CODE",
      "target_column": "transactionCode",
      "transformation": "copy"
    },
    {
      "source_column": "TRANSACTION_CODE_DESC",
      "target_column": "transactionCodeDescription",
      "transformation": "copy"
    },
    {
      "source_column": "SOURCE_TRANSACTION_ID",
      "target_column": "sourceTransactionId",
      "transformation": "copy"
    },
    {
      "source_column": "TRANSACTION_DATE",
      "target_column": "transactionDate",
      "transformation": "copy"
    },
    {
      "source_column": "ORIGINAL_AMOUNT",
      "target_column": "amountLocal",
      "transformation": "cast",
      "type": "double"
    },
    {
      "source_column": "TRANSACTION_COUNTRY",
      "target_column": "transactionCountry",
      "transformation": "copy"
    },
    {
      "source_column": "TRANSACTION_LOCATION",
      "target_column": "transactionLocation",
      "transformation": "copy"
    },
    {
      "source_column": "SCREENING_SYSTEM",
      "target_column": "sourceSystem",
      "transformation": "copy"
    },
    {
      "source_column": "EFF_START_DATE",
      "target_column": "effStartDate",
      "transformation": "copy"
    }
  ]
}