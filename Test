Source,Target,Logic
transaction.TRANSACTION_ID,transactionId,Copy as is
transaction.TRANSACTION_ID and transaction.eff_start_date,transactionUniqueId,Concatenate with //
transaction.TRANSACTION_TYPE,transactionType,Copy as is
transaction.ACCOUNT_ID or transaction.COUNTERPARTY_ID,aAccountId,If DEBIT, use ACCOUNT_ID; if CREDIT, use COUNTERPARTY_ID
Derived from aAccountId,aAccountIdPrefix,Substring from aAccountId, first 5 chars
Derived from aAccountId and aAccountIdPrefix,aAccountNumber,If UKUBA, substring(8,16); If UKGTS, substring(7,16)
Derived from aAccountNumber,aAccountNumberCleansed,Remove special characters
transaction.ACCOUNT_KEY or transaction.COUNTERPARTY_PRODUCT_KEY,aAccountKey,If DEBIT, use ACCOUNT_KEY; If CREDIT, use COUNTERPARTY_PRODUCT_KEY
Derived from aSortCode, aAccountNumber, aAccountKey,aAccountUniqueId,Concat aSortCode + aAccountNumber; else split aAccountKey
transaction.CUSTOMER_KEY or transaction.COUNTERPARTY_CUSTOMER_KEY,aCustomerId,If DEBIT, use COUNTERPARTY_CUSTOMER_KEY; If CREDIT, use CUSTOMER_KEY
transaction.BRANCH_KEY,aBranchUniqueId,If DEBIT, use BRANCH_KEY; else blank
Derived from aAccountId or transaction.TRANSACTION_ROUTING_NUMBER,aSortCode,Extract from aAccountId; fallback to TRANSACTION_ROUTING_NUMBER
transaction.ACCOUNT_ID or transaction.COUNTERPARTY_ID,bAccountId,If DEBIT, use COUNTERPARTY_ID; If CREDIT, use ACCOUNT_ID
transaction.ACCOUNT_KEY or transaction.COUNTERPARTY_PRODUCT_KEY,bAccountKey,If DEBIT, use COUNTERPARTY_PRODUCT_KEY; If CREDIT, use ACCOUNT_KEY
transaction.CUSTOMER_KEY or transaction.COUNTERPARTY_CUSTOMER_KEY,bCustomerId,If DEBIT, use COUNTERPARTY_CUSTOMER_KEY; If CREDIT, use CUSTOMER_KEY
transaction.NARRATIVE,narrative,Copy as is
transaction.SHORTNARRATIVE,narrativeShort,Copy as is
transaction.TRANSACTION_CODE,transactionCode,Copy as is
transaction.TRANSACTION_CODE_DESC,transactionCodeDescription,Copy as is
transaction.SOURCE_TRANSACTIONLID,sourceTransactionId,Copy as is
transaction.TRANSACTION_DATE,transactionDate,Format to YYYY-MM-DD
transaction.ORIGINAL_AMOUNT,amountLocal,Cast to double
transaction.TRANSACTION_COUNTRY,transactionCountry,Copy as is
transaction.TRANSACTION_LOCATION,transactionLocation,Copy as is
transaction.SCREENING_SYSTEM,sourceSystem,Copy as is
transaction.EFF_START_DATE,effStartDate,Copy as is